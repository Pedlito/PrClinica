@model BD_PR_01_Clinicas.Models.HistoriaClinica

@{
    ViewBag.Title = "Crear";
}
@*@Model.tbPaciente.nombre*@
<div class="page-header">
    <h1>Historia Clinica <small>@Model.paciente.nombre</small></h1>
</div>

<div>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#paciente" role="tab" data-toggle="tab">Paciente</a></li>
        <li role="presentation"><a href="#consulta" role="tab" data-toggle="tab">Consulta</a></li>
        <li role="presentation"><a href="#patologicos" role="tab" data-toggle="tab">Patológicos</a></li>
        <li role="presentation"><a href="#nPatologicos" role="tab" data-toggle="tab">No Patológicos</a></li>
        <li role="presentation"><a href="#perfil" role="tab" data-toggle="tab">Perfil</a></li>
        <li role="presentation"><a href="#revision" role="tab" data-toggle="tab">Revisón</a></li>
        <li role="presentation"><a href="#signos" role="tab" data-toggle="tab">Signos</a></li>
        <li role="presentation"><a href="#problemas" role="tab" data-toggle="tab">Problemas</a></li>
        <li role="presentation"><a href="#planes" role="tab" data-toggle="tab">Planes</a></li>
        <li role="presentation"><a href="#diagnostico" role="tab" data-toggle="tab">Diagnostico</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">

        <div role="tabpanel" class="tab-pane active" id="paciente">
            <h2>Datos Generales del Paciente</h2>
            <form>
                <!-- Formulario -->
                <div class="modal-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.Label("Nombre", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.nombre, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Genero", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.paciente.genero, true)Masculino</label>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.paciente.genero, false)Femenino</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-2">Fecha Nacimiento</label>
                            @*@Html.Label("Fecha Nacimiento", htmlAttributes: new { @class = "control-label col-md-2" })*@
                            <div class="col-md-10">
                                @if (@Model.paciente.fechaNacimiento != null)
                                {
                                    <input type="date" id="fechaNacimiento" class="form-control" value='@Model.paciente.fechaNacimiento.Value.ToString("yyy-MM-dd")' />
                                }
                                else
                                {
                                    <input type="date" id="fechaNacimiento" class="form-control"/>

                                }
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Estado Civil", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.paciente.estadoCivil, true)Soltero</label>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.paciente.estadoCivil, false)Casado</label>
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Residencia", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.residencia, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Procedencia", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.procedencia, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Religíon", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.religion, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Profesión", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.profesion, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Raza/Etnia", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.razaEtnia, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Escolaridad", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.paciente.escolaridad, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Tipo de Sangre", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                               @Html.DropDownList("paciente_codTipoSangre", null, "Seleccione un tipo de sangre", new { @class = "form-control" })
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="consulta">
            <h2>Consulta</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Motivo de Consulta", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.consulta.motivoConsulta, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Historia Enfermedad", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.consulta.HistoriaEnfermedad, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Fecha Llegada", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            <input type="date" id="fechaLlegada" value="@Model.consulta.fechaLlegada.Value.ToString("yyy-MM-dd")" readonly class="form-control"/>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Hora Llegada", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            <input type="time" id="fechaLlegada" value="@Model.consulta.fechaLlegada.Value.ToShortTimeString()" readonly class="form-control" />
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="patologicos">
            <h2>Antecedentes Patológicos</h2>
            <form>
                <!-- Formulario -->
                <div class="modal-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.Label("Padre", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.padre, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Madre", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.madre, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Médicos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.medicos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Quirúrgicos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.quirurgicos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Traumáticos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.traumaticos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Alérgicos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.alergicos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Gineco-Obstétricos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.ginecoObstetricos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Vicios y Manias", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.patologicos.viciosManias, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="nPatologicos">
            <h2>Antecedentes No Patológicos</h2>
            <form>
                <!-- Formulario -->
                <div class="modal-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.Label("Prenatal", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.prenatal, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Natal", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.natal, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Posnatal", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.posnatal, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Desarrollo", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#hitos">Llenar Formulario</button>
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Inmunizaciónes", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.inmunizaciones, new { @class = "form-control",  rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Alimentación", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.alimentacion, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Hábitos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.noPatologicos.habitos, new { @class = "form-control",  rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        @if (Model.paciente.genero == false)
                        {
                            <div class="form-group">
                                @Html.Label("Gineco-Obstetricos", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-md-10">
                                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#mujeres">Llenar Formulario</button>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="revision">
            <h2>Revisión por Sistemas</h2>
            <form>
                <!-- Formulario -->
                <div class="modal-body">
                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.Label("Conducta", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.conducta, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Piel y faneras", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.piel, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Cabeza", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.cabeza, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Ojos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.ojos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Oídos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.oidos, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("nariz", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.nariz, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Vicios y Manias", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.revision.vicios, new { @class = "form-control", rows = "4", maxlength = "700" })
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="perfil">
            <h2>Perfil Social</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Estilo de Vida", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.estiloVida, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Vivienda", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.vivienda, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Situacion Familiar", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.situacionFamiliar, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Ingreso Económico", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.ingresoEconomico, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Animales", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.animales, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Tendencia Sexual", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.tendenciaSexual, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Punto de vista", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.perfilSocial.puntoVista, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="signos">
            <h2>Signos Vitales</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Peso", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.peso, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Talla", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.talla, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Indice de Masa Corporal", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.indiceMasaCorporal, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Presión Arterial", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.presionArterial, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Frecuencia Cardiaca", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.frecuenciaCardiaca, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Frecuencia Respiratoria", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.frecuenciaRespiratoria, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Temperatura", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.temperatura, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Circunferencia Cefálica", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.circCefalica, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Circunferencia Abdominal", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.circAbdominal, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    @if (Model.paciente.genero == false)
                    {
                        <div class="form-group">
                            @Html.Label("Foco Fetal", htmlAttributes: new { @class = "control-label col-md-3" })
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.signos.focoFetal, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Altura de Fondo Uterino", htmlAttributes: new { @class = "control-label col-md-3" })
                            <div class="col-md-9">
                                @Html.EditorFor(model => model.signos.alturaFondoUterino, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                            </div>
                        </div>
                    }

                    <div class="form-group">
                        @Html.Label("Pulso", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.pulso, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Saturación de Oxigeno", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.signos.saturacionOxigeno, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="problemas">
            <h2>Listado de Problemas</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    <div class="form-group" style="margin-left: 20px">
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#agregarProblema">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Agregar Problema
                        </button>
                    </div>

                    <div id="listaProblemas">

                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="planes">
            <h2>Plan y Diagnostico Diferencial</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Plan Inicial", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.planes.planInicial, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Plan Diagnostico", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.planes.planDiagnostico, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Diagnostico Diferencial", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.planes.diagnosticoDiferencial, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Plan Educacional", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.planes.planEducacional, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <hr />

                    <h3>Plan Terapeutico</h3>
                    <div class="form-group">
                        @Html.Label("Actividad", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.terapeutico.actividad, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Dieta", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.terapeutico.dieta, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Receta", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            <button type="button" class="btn btn-info" data-toggle="modal" data-target="#receta">Crear Receta</button>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Controles Especificos", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.terapeutico.controlesEspecificos, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Otras Terapias", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.terapeutico.otrasTerapias, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div role="tabpanel" class="tab-pane" id="diagnostico">
            <h2>Diagnostico Final</h2>
            <form>
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Impresión Clínica", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(model => model.diagnostico.impresionClinica, new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Médico", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.DropDownList("diagnostico_codUsuario", null, "Seleccione una Médico", htmlAttributes: new { @class = "form-control" })
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

</div>


<div class="form-inline">
    <div class="form-group">
        <button type="button" onclick="guardar()" class="btn btn-success btn-lg">
            <span class="glyphicon glyphicon-floppy-saved" aria-hidden="true"></span> Guardar Historia Clinica
        </button>
    </div>

    <div class="form-group">
        <a href="@Url.Action("Index")" class="btn btn-danger btn-lg" onclick="return confirm('¿Realmente desea cancelar?')">
            <span class="glyphicon glyphicon-floppy-remove"></span> Cancelar
        </a>
    </div>
</div>

<!-- modal para formulario de meses-->
<div class="modal fade" id="hitos" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Desarrollo</h4>
            </div>
            <div class="modal-body">

                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th class="text-center">
                                @Html.DisplayName("Edad (Meses)")
                            </th>
                            <th>
                                @Html.DisplayName("Hito")
                            </th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center">
                                1
                            </td>
                            <td>
                                <p>Levanta la cabeza</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.uno, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.uno, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                2
                            </td>
                            <td>
                                <p>Eleva el torax</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.dos, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.dos, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                3 
                            </td>
                            <td>
                                <p>Intenta agarra objetos, pero no lo consigue</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.tres, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.tres, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                4 
                            </td>
                            <td>
                                <p>Se sostiene sentado, pero no lo consigue</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.cuatro, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.cuatro, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                5 
                            </td>
                            <td>
                                <p>agarra objetos</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.cinco, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.cinco, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                6 
                            </td>
                            <td>
                                <p>Aguanta sentado en una silla y aguanta objetos con mayor precisión</p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.seis, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.seis, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                7 
                            </td>
                            <td>
                                <p>
                                    Aguanta sentado en una silla y aguanta objetos con mayor precisión,
                                    Se Destapa,
                                    Se pasa los objetos de mano y manipula,
                                    Si alguien lo sienta se mantiene sentado,
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.siete, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.siete, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                8 
                            </td>
                            <td>
                                <p>
                                    Gatea,
                                    Juega a lanzar objetos,
                                    Extiende los brazos para que lo Levanten
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.ocho, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.ocho, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                9 
                            </td>
                            <td>
                                <p>
                                    Se pone de pie con apoyo,
                                    Juega a taparse y destaparse,
                                    Imita gestos con las manos
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.nueve, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.nueve, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                10 
                            </td>
                            <td>
                                <p>
                                    Se pone de pie apoyándose,
                                    Hace una pinza con índice y pulgar,
                                    Mete y saca un objeto de un recipiente
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.diez, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.diez, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                11 
                            </td>
                            <td>
                                <p>
                                    Realiza los primeros pasos apoyándose,
                                    Señala con el índice y entiende algunas palabras,
                                    Entrega objetos
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.oncee, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.oncee, false)No</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">
                                12 
                            </td>
                            <td>
                                <p>
                                    Se mantiene de pie sin apoyo,
                                    Baila al oír música,
                                    Mira su imagen en un espejo
                                </p>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.doce, true)Si</label>
                            </td>
                            <td>
                                <label class="radio-inline">@Html.RadioButtonFor(model => model.desarrollo.doce, false)No</label>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- modal para datos de mujeres-->
<div class="modal fade" id="mujeres" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Mujeres</h4>
            </div>
            <div class="modal-body">

                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <div class="form-group">
                        @Html.Label("Menarquia", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.menarquia, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Ritmo", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            <label class="radio-inline">@Html.RadioButtonFor(model => model.mujeres.ritmo, true) Regular </label>
                            <label class="radio-inline">@Html.RadioButtonFor(model => model.mujeres.ritmo, false)Irregular</label>
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("FUR", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @if (Model.mujeres != null)
                            {
                                if (Model.mujeres.ultimaRegla != null)
                                {
                                    <input type="date" id="ultimaRegla" class="form-control" value='@Model.mujeres.ultimaRegla.Value.ToString("yyy-MM-dd")' />
                                }
                            }
                            else
                            {
                                <input type="date" id="ultimaRegla" class="form-control" />
                            }
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Número Gestas", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.numGestas, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Partos", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.partos, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Cesareas", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.cesareas, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Abortos", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.abortos, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Hijos Vivos", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.hijosVivos, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Hijos Muertos", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.mujeres.hijosMuertos, new { htmlAttributes = new { @class = "form-control", onkeypress = "return numerico(event)" } })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.Label("Método Planificación", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="col-md-8">
                            @Html.TextAreaFor(model => model.mujeres.metodoPlanificacion, new { @class = "form-control", placeholder = "Ingrese una descripcion", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- modal para Crear Receta-->
<div class="modal fade" id="receta" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Receta</h4>
            </div>
            <div class="modal-body" id="medicamentos">

                <div class="form-group">
                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#listaMedicamentos">
                        Agregar
                    </button>
                </div>
                <div id="detalle">

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- modal para lista de medicamentos-->
<div class="modal fade" id="listaMedicamentos" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Medicamentos</h4>
            </div>
            <div class="modal-body" id="medicamentos">

                <div class="form-group">
                    <input type="text" id="filtro" placeholder="Nombre del medicamento" onkeyup="filtrar()" class="form-control" autocomplete="off"/>
                </div>
                <div id="listado">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- modal para pedir prescripcion-->
<div class="modal fade" id="prescripcion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        @Html.Label("Prescripcion", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.TextArea("descripcion", new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="cambiarDescripcion()">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- modal para Crear Problemas-->
<div class="modal fade" id="agregarProblema" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Agregar Problema</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    
                    <div class="form-group">
                        @Html.Label("Problema", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.TextArea("problema", new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Datos Subjetivos", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.TextArea("subjetivos", new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Datos Objetivos", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.TextArea("objetivos", new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("Analisis", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.TextArea("analisis", new { @class = "form-control", rows = "4", maxlength = "700" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="agregarProblema()">Guardar</button>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>
        var codConsulta = @Model.consulta.codConsulta;
        var codPaciente = @Model.paciente.codPaciente;
        var receta = [];
        var problemas = [];
        var paraReceta = null;

        function filtrar() {
            var filtro = $('#filtro').val();
            $.ajax({
                type: "POST",
                url: '@Url.Action("Filtrar", "Atencion")',
                data: { filtro },
                success: function (response) {
                    $('#listado').html(response);
                }
            });
        }

        function agregar(codProducto) {
            var index = receta.findIndex(function (element) { return element.codProducto == codProducto });
            if (index == -1) {
                paraReceta = { codConsulta: codConsulta, codProducto: parseInt(codProducto), descripcion: "" };
                $('#prescripcion').modal('show');
            }
            else {
                alert("El Articulo seleccionado ya ha sido agregado");
            }
        }

        function cambiarDescripcion(){
            paraReceta.descripcion = $('#descripcion').val(),
            receta.push(paraReceta);
            paraReceta = null;
            //var index = receta.findIndex(function (element) { return element.codProducto == codProducto });
            //receta[index].descripcion = entrada.value;
            $.ajax({
                traditional: true,
                url: '@Url.Action("DetalleReceta", "Atencion")',
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(receta),
                success: function (response) {
                    $('#listaMedicamentos').modal('hide');
                    $('#detalle').html(response);
                }
            });
        }

        function quitarReceta(codProducto){
            var index = receta.findIndex(function (element) { return element.codProducto == codProducto });
            receta.splice(index,1);
            $.ajax({
                traditional: true,
                url: '@Url.Action("DetalleReceta", "Atencion")',
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(receta),
                success: function (response) {
                    $('#detalle').html(response);
                }
            });
        }

        function guardar() {
            var paciente = {
                "codPaciente": codPaciente,
                "nombre": $('#paciente_nombre').val(),
                "genero": $('input[id=paciente_genero]:checked').val(),
                "fechaNacimiento": $('#fechaNacimiento').val(),
                "estadoCivil": $('input[id=paciente_estadoCivil]:checked').val(),
                "residencia": $('#paciente_residencia').val(),
                "procedencia": $('#paciente_procedencia').val(),
                "religion": $('#paciente_religion').val(),
                "profesion": $('#paciente_profesion').val(),
                "razaEtnia": $('#paciente_razaEtnia').val(),
                "escolaridad": $('#paciente_escolaridad').val(),
                "codTipoSangre": $('#paciente_codTipoSangre').val(),
            };
            var patologicos = {
                "codPaciente": codPaciente,
                "padre": $('#patologicos_padre').val(),
                "madre": $('#patologicos_madre').val(),
                "medicos": $('#patologicos_medicos').val(),
                "quirurgicos": $('#patologicos_quirurgicos').val(),
                "traumaticos": $('#patologicos_traumaticos').val(),
                "alergicos": $('#patologicos_alergicos').val(),
                "ginecoObstetricos": $('#patologicos_ginecoObstetricos').val(),
                "viciosManias": $('#patologicos_viciosManias').val(),
            };
            var noPatologicos = {
                "codPaciente": codPaciente,
                "prenatal": $('#noPatologicos_prenatal').val(),
                "natal": $('#noPatologicos_natal').val(),
                "posnatal": $('#noPatologicos_posnatal').val(),
                "inmunizaciones": $('#noPatologicos_inmunizaciones').val(),
                "alimentacion": $('#noPatologicos_alimentacion').val(),
                "habitos": $('#noPatologicos_habitos').val(),
            };
            var desarrollo = {
                "codPaciente": codPaciente,
                "uno": $('input[id=desarrollo_uno]:checked').val(),
                "dos": $('input[id=desarrollo_dos]:checked').val(),
                "tres": $('input[id=desarrollo_tres]:checked').val(),
                "cuatro": $('input[id=desarrollo_cuatro]:checked').val(),
                "cinco": $('input[id=desarrollo_cinco]:checked').val(),
                "seis": $('input[id=desarrollo_seis]:checked').val(),
                "siete": $('input[id=desarrollo_siete]:checked').val(),
                "ocho": $('input[id=desarrollo_ocho]:checked').val(),
                "nueve": $('input[id=desarrollo_nueve]:checked').val(),
                "diez": $('input[id=desarrollo_diez]:checked').val(),
                "oncee": $('input[id=desarrollo_once]:checked').val(),
                "doce": $('input[id=desarrollo_doce]:checked').val(),
            };
            var mujeres = {
                "codPaciente": codPaciente,
                "menarquia": $('#mujeres_menarquia').val(),
                "ritmo": $('input[id=mujeres_ritmo]:checked').val(),
                "ultimaRegla": $('#ultimaRegla').val(),
                "numGestas": $('#mujeres_numGestas').val(),
                "partos": $('#mujeres_partos').val(),
                "cesareas": $('#mujeres_cesareas').val(),
                "abortos": $('#mujeres_abortos').val(),
                "hijosVivos": $('#mujeres_hijosVivos').val(),
                "hijosMuertos": $('#mujeres_hijosMuertos').val(),
                "metodoPlanificacion": $('#mujeres_metodoPlanificacion').val(),
            };
            var perfilSocial = {
                "codPaciente": codPaciente,
                "estiloVida": $('#perfilSocial_estiloVida').val(),
                "vivienda": $('#perfilSocial_vivienda').val(),
                "situacionFamiliar": $('#perfilSocial_situacionFamiliar').val(),
                "ingresoEconomico": $('#perfilSocial_ingresoEconomico').val(),
                "animales": $('#perfilSocial_animales').val(),
                "tendenciaSexual": $('#perfilSocial_tendenciaSexual').val(),
                "puntoVista": $('#perfilSocial_puntoVista').val()
            };
            var revision = {
                "codConsulta": codConsulta,
                "conducta": $('#revision_conducta').val(),
                "piel": $('#revision_piel').val(),
                "cabeza": $('#revision_cabeza').val(),
                "ojos": $('#revision_ojos').val(),
                "oidos": $('#revision_oidos').val(),
                "nariz": $('#revision_nariz').val(),
                "vicios": $('#revision_vicios').val()
            }
            var signos = {
                "codConsulta": codConsulta,
                "peso": $('#signos_peso').val(),
                "talla": $('#signos_talla').val(),
                "indiceMasaCorporal": $('#signos_indiceMasaCorporal').val(),
                "presionArterial": $('#signos_presionArterial').val(),
                "frecuenciaCardiaca": $('#signos_frecuenciaCardiaca').val(),
                "frecuenciaRespiratoria": $('#signos_frecuenciaRespiratoria').val(),
                "temperatura": $('#signos_temperatura').val(),
                "circCefalica": $('#signos_circCefalica').val(),
                "circAbdominal": $('#signos_circAbdominal').val(),
                "focoFetal": $('#signos_focoFetal').val(),
                "alturaFondoUterino": $('#signos_alturaFondoUterino').val(),
                "pulso": $('#signos_pulso').val(),
                "saturacionOxigeno": $('#signos_saturacionOxigeno').val(),
            };
            var planes = {
                "codConsulta": codConsulta,
                "planInicial": $('#planes_planInicial').val(),
                "planDiagnostico": $('#planes_planDiagnostico').val(),
                "diagnosticoDiferencial": $('#planes_diagnosticoDiferencial').val(),
                "planEducacional": $('#planes_planEducacional').val(),
            };
            var terapeutico = {
                "codConsulta": codConsulta,
                "actividad": $('#terapeutico_actividad').val(),
                "dieta": $('#terapeutico_dieta').val(),
                "controlesEspecificos": $('#terapeutico_controlesEspecificos').val(),
                "otrasTerapias": $('#terapeutico_otrasTerapias').val(),
            };
            var diagnostico = {
                "codConsulta": codConsulta,
                "impresionClinica": $('#diagnostico_impresionClinica').val(),
                "codUsuario": $('#diagnostico_codUsuario').val()
            };
            var consulta = {
                "codConsulta": codConsulta,
                "motivoConsulta": $('#consulta_motivoConsulta').val(),
                "HistoriaEnfermedad": $('#consulta_HistoriaEnfermedad').val()
            };
            var historia = {
                "consulta": consulta,
                "paciente": paciente,
                "patologicos": patologicos,
                "noPatologicos": noPatologicos,
                "desarrollo": desarrollo,
                "perfilSocial": perfilSocial,
                "mujeres": mujeres,
                "revision": revision,
                "signos": signos,
                "problemas": problemas,
                "planes": planes,
                "terapeutico": terapeutico,
                "receta": receta,
                "diagnostico": diagnostico
            };
            if (diagnostico.codUsuario == "") {
                alert("Es obligatorio seleccionar un Médico en el Diagnostico");
            }
            else
            {
                $.ajax({
                    url: '@Url.Action("GuardarHC", "Atencion")',
                    type: "POST",
                    data: { "historia": historia },
                    success: function (response) {
                        window.location.href = response;
                    }
                });
            }
        }

        function agregarProblema() {
            problemas.push({
                codConsulta: codConsulta,
                problema: $('#problema').val(),
                subjetivos: $('#subjetivos').val(),
                objetivos: $('#objetivos').val(),
                analisis: $('#analisis').val()
            });
            $.ajax({
                traditional: true,
                url: '@Url.Action("Problemas", "Atencion")',
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(problemas),
                success: function (response) {
                    $('#listaMedicamentos').modal('hide');
                    $('#listaProblemas').html(response);
                }
            });
        }

        function quitar(problema) {
            var index = problemas.findIndex(function (element) { return element.problema == problema });
            problemas.splice(index, 1);
            $.ajax({
                traditional: true,
                url: '@Url.Action("Problemas", "Atencion")',
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(problemas),
                success: function (response) {
                    $('#listaProblemas').html(response);
                }
            });
        }

        function numerico(event){
            var n = event.charCode;
            var respuesta = ((n >= 48 && n <= 57) || n == 0);
            return respuesta;
        }

        function decimal(event){
            var n = event.charCode;
            var respuesta = ((n >= 48 && n <= 57) || n == 46 || n == 0);
            return respuesta;
        }

        window.onload = function (){
            $('#paciente_codTipoSangre > option[value="@Model.paciente.codTipoSangre"]').attr('selected', 'selected');
        }

        function vacio(input, nab){
            if (input.val() == "") {
                alert("Existe uno o varios campos vacios")
                $(nab).tab('show');
                input.focus();
                return false;
            }
            else{
                return true;
            }
        }

    </script>
}